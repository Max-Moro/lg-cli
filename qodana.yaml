# Qodana Configuration for Python Project
# Documentation: https://www.jetbrains.com/help/qodana/qodana-yaml.html

version: "1.0"

# Use the Community Edition linter for Python
linter: qodana-python-community

# Bootstrap command to install dependencies before analysis
# This ensures Qodana can resolve all imports and type hints
bootstrap: |
  echo "Installing project dependencies..."
  python -m pip install --upgrade pip
  python -m pip install -e .[dev]
  echo "Dependencies installed successfully"

# Inspection profile
profile:
  name: qodana.recommended

# Exclude inspections and paths
exclude:
  # Exclude all inspections from generated files
  - name: All
    paths:
      - .qodana
      - lg/diag/diag_report_schema.py
      - lg/stats/report_schema.py

  # Disable harmful/noisy inspections globally
  # PyMethodMayBeStaticInspection: Suggests making methods static - harmful, breaks API consistency
  - name: PyMethodMayBeStaticInspection

  # PyShadowingNamesInspection: Variable shadowing - prevents elegant short names
  - name: PyShadowingNamesInspection

  # PyUnreachableCodeInspection: False positives on type narrowing, Literal exhaustion, Optional handling
  - name: PyUnreachableCodeInspection

  # PyBroadExceptionInspection: Sometimes reasonable, but too many false positives
  - name: PyBroadExceptionInspection

  # PyPep8NamingInspection: Migration classes intentionally use underscore prefix for privacy
  - name: PyPep8NamingInspection
    paths:
      - lg/migrate/migrations
