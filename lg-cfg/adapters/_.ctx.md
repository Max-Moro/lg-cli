{% if scope:local AND tag:agent %}
${tpl:agent/index}

---
{% endif %}
${docs/intro}

---
{% if tag:review %}
# Changed source code in current branch
{% else %}
# Source code
{% endif %}
{% if tag:tests %}## Main code{% endif %}

${adapters/_/src}
{% if tag:tests %}
## Test code

${adapters/_/tests}
{% endif %}
---

# Extended documentation

${md:docs/en/adapters}

${md@self:adapters/budget, if:TAGSET:adapters-optimizations:budget}

${md@self:adapters/TREE_SITTER, if:tag:core}

${md:tests/adapters/golden_utils, if:tag:tests-infra}

${md@self:adapters/testing_guidelines}

${md@self:adapters/literals_architecture, if:tag:literals}

${md@self:adapters/code_optimization_architecture, if:(tag:function-bodies OR tag:public-api)}

${md@self:adapters/trivial_files_architecture.md, if:tag:trivial}
{% if task %}
---

# Current task description

${task}{% endif %}
{% if scope:local AND tag:agent %}
${tpl:agent/footer}
{% endif %}