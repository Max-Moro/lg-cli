# ====== В разрезе конкретных способов оптимизации ======

# Function body optimization.

src__function-bodies:
  extensions: [".py"]
  path_labels: relative
  filters:
    mode: allow
    allow:
      - "/lg/adapters/"
    children:
      lg:
        mode: block
        children:
          adapters:
            mode: block
            block:
#              - "/python/"
#              - "/typescript/"
              - "/cpp.py"
              - "/java.py"
              - "/javascript.py"
              - "/markdown.py"
              - "/scala.py"
            children:
              optimizations:
                mode: allow
                allow:
                  - "/function_bodies.py"
              python:
                mode: allow
                allow:
                  - "/adapter.py"
                  - "/queries.py"
                  - "/function_bodies.py"
              typescript:
                mode: allow
                allow:
                  - "/adapter.py"
                  - "/queries.py"
                  - "/function_bodies.py"


src-tests__function-bodies:
  extensions: [".py", ".ts"]
  path_labels: relative
  filters:
    mode: allow
    allow:
      - "/tests/adapters/"
      - "/tests/conftest.py"
    children:
      tests:
        mode: block
        children:
          adapters:
            mode: block
            block:
#              - "/python/"
#              - "/typescript/"
              - "/test_infrastructure.py"
              - "/test_integration.py"
              - "/golden_utils.py"
            children:
              python:
                mode: allow
                allow:
                  - "/conftest.py"
                  - "/test_function_bodies.py"
                  - "/goldens/do/function_bodies.py"
              typescript:
                mode: allow
                allow:
                  - "/conftest.py"
                  - "/test_function_bodies.py"
                  - "/goldens/do/function_bodies.ts"

# Comment optimization

src__comments:
  extensions: [".py"]
  path_labels: relative
  filters:
    mode: allow
    allow:
      - "/lg/adapters/"
    children:
      lg:
        mode: block
        children:
          adapters:
            mode: block
            block:
#              - "/python/"
#              - "/typescript/"
              - "/cpp.py"
              - "/java.py"
              - "/javascript.py"
              - "/markdown.py"
              - "/scala.py"
              - "/placeholders.py"
              - "/code_analysis.py"
            children:
              optimizations:
                mode: allow
                allow:
                  - "/comments.py"
                  - "/literals.py"
              python:
                mode: allow
                allow:
                  - "/adapter.py"
                  - "/queries.py"
                  - "/comments.py"
              typescript:
                mode: allow
                allow:
                  - "/adapter.py"
                  - "/queries.py"
                  - "/comments.py"


src-tests__comments:
  extensions: [".py", ".ts"]
  path_labels: relative
  filters:
    mode: allow
    allow:
      - "/tests/adapters/"
      - "/tests/conftest.py"
    children:
      tests:
        mode: block
        children:
          adapters:
            mode: block
            block:
#              - "/python/"
#              - "/typescript/"
              - "/test_infrastructure.py"
              - "/test_integration.py"
            children:
              python:
                mode: allow
                allow:
                  - "/conftest.py"
                  - "/test_comments.py"
                  - "/goldens/do/comments.py"
              typescript:
                mode: allow
                allow:
                  - "/conftest.py"
                  - "/test_comments.py"
                  - "/goldens/do/comments.ts"

# Literal optimization

src__literals:
  extensions: [".py"]
  path_labels: relative
  filters:
    mode: allow
    allow:
      - "/lg/adapters/"
    children:
      lg:
        mode: block
        children:
          adapters:
            mode: block
            block:
#              - "/python/"
#              - "/typescript/"
              - "/cpp.py"
              - "/java.py"
              - "/javascript.py"
              - "/markdown.py"
              - "/scala.py"
            children:
              optimizations:
                mode: allow
                allow:
                  - "/literals.py"
              python:
                mode: allow
                allow:
                  - "/adapter.py"
                  - "/queries.py"
                  - "/literals.py"
              typescript:
                mode: allow
                allow:
                  - "/adapter.py"
                  - "/queries.py"
                  - "/literals.py"


src-tests__literals:
  extensions: [".py", ".ts"]
  path_labels: relative
  filters:
    mode: allow
    allow:
      - "/tests/adapters/"
      - "/tests/conftest.py"
    children:
      tests:
        mode: block
        children:
          adapters:
            mode: block
            block:
#              - "/python/"
#              - "/typescript/"
              - "/test_infrastructure.py"
              - "/test_integration.py"
              - "/golden_utils.py"
            children:
              python:
                mode: allow
                allow:
                  - "/conftest.py"
                  - "/goldens/do/literals.py"
              typescript:
                mode: allow
                allow:
                  - "/conftest.py"
                  - "/goldens/do/literals.ts"

# Import optimization

src__imports:
  extensions: [".py"]
  path_labels: relative
  filters:
    mode: allow
    allow:
      - "/lg/adapters/"
    children:
      lg:
        mode: block
        children:
          adapters:
            mode: block
            block:
#              - "/python/"
#              - "/typescript/"
              - "/cpp.py"
              - "/java.py"
              - "/javascript.py"
              - "/markdown.py"
              - "/scala.py"
            children:
              optimizations:
                mode: allow
                allow:
                  - "/imports.py"
              python:
                mode: allow
                allow:
                  - "/adapter.py"
                  - "/queries.py"
                  - "/imports.py"
              typescript:
                mode: allow
                allow:
                  - "/adapter.py"
                  - "/queries.py"
                  - "/imports.py"


src-tests__imports:
  extensions: [".py", ".ts"]
  path_labels: relative
  filters:
    mode: allow
    allow:
      - "/tests/adapters/"
      - "/tests/conftest.py"
    children:
      tests:
        mode: block
        children:
          adapters:
            mode: block
            block:
#              - "/python/"
#              - "/typescript/"
              - "/test_infrastructure.py"
              - "/test_integration.py"
            children:
              python:
                mode: allow
                allow:
                  - "/conftest.py"
                  - "/test_imports.py"
                  - "/goldens/do/imports.py"
              typescript:
                mode: allow
                allow:
                  - "/conftest.py"
                  - "/test_imports.py"
                  - "/goldens/do/imports.ts"

# Public API optimization

src__public-api:
  extensions: [".py"]
  path_labels: relative
  filters:
    mode: allow
    allow:
      - "/lg/adapters/"
    children:
      lg:
        mode: block
        children:
          adapters:
            mode: block
            block:
#              - "/python/"
#              - "/typescript/"
              - "/cpp.py"
              - "/java.py"
              - "/javascript.py"
              - "/markdown.py"
              - "/scala.py"
            children:
              optimizations:
                mode: allow
                allow:
                  - "/public_api.py"
                  - "/function_bodies.py"
              python:
                mode: allow
                allow:
                  - "/adapter.py"
                  - "/queries.py"
                  - "/public_api.py"
                  - "/function_bodies.py"
              typescript:
                mode: allow
                allow:
                  - "/adapter.py"
                  - "/queries.py"
                  - "/public_api.py"
                  - "/function_bodies.py"


src-tests__public-api:
  extensions: [".py", ".ts"]
  path_labels: relative
  filters:
    mode: allow
    allow:
      - "/tests/adapters/"
      - "/tests/conftest.py"
    children:
      tests:
        mode: block
        children:
          adapters:
            mode: block
            block:
#              - "/python/"
#              - "/typescript/"
              - "/test_infrastructure.py"
              - "/test_integration.py"
              - "/golden_utils.py"
            children:
              python:
                mode: allow
                allow:
                  - "/conftest.py"
                  - "/test_public_api.py"
                  - "/goldens/do/public_api.py"
              typescript:
                mode: allow
                allow:
                  - "/conftest.py"
                  - "/test_public_api.py"
                  - "/goldens/do/public_api.ts"

# Public Complex

src-tests__complex:
  extensions: [".py", ".ts"]
  path_labels: relative
  filters:
    mode: allow
    allow:
      - "/tests/adapters/"
      - "/tests/conftest.py"
    children:
      tests:
        mode: block
        children:
          adapters:
            mode: block
            block:
#              - "/python/"
#              - "/typescript/"
              - "/test_infrastructure.py"
              - "/test_integration.py"
            children:
              python:
                mode: allow
                allow:
                  - "/conftest.py"
                  - "/test_literals.py"
                  - "/test_public_api.py"
                  - "/goldens/do/"
              typescript:
                mode: allow
                allow:
                  - "/conftest.py"
                  - "/test_literals.py"
                  - "/test_public_api.py"
                  - "/goldens/do/"
