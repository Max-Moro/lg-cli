# Дорожная карта LG V2: поэтапная разработка

## Этап 1: [+] Фундамент, новая IR-модель и конфигурация адаптивных возможностей

## Этап 2: [+] Движок шаблонизации

## Этап 3: [+] Обработчик секций

## Этап 4: Система сбора статистики

- **Задача 4.1**: Создать инкрементальный коллектор статистики
  - Реализовать базовые функции в `lg/stats/collector.py`
  - Обеспечить корректный сбор метрик во время рендеринга

- **Задача 4.2**: Интегрировать коллектор с процессором шаблонов и обработчиком секций
  - Добавить точки сбора статистики в ключевых местах обработки
  - Обеспечить сбор метаданных и токенов

- **Задача 4.3**: Реализовать формирование финального отчета
  - Создать функции преобразования собранных данных в формат API
  - Обеспечить обратную совместимость с форматом отчетов v4

- **Задача 4.4**: Прибраться в новой IR-модели
  - Оставить статистические данные только в нужных датаклассах `lg/types_v2.py`

## Этап 5: Новый пайплайн и интеграция

- **Задача 5.1**: Реализовать новую версию движка в `lg/engine_v2.py`
  - Создать основные функции для координации компонентов

- **Задача 5.2**: Интегрировать новый движок с CLI

## Этап 6: Тестирование, отладка и документация
