src:
  extensions: [".py", ".toml"]
  filters:
    mode: allow
    allow:
      - "/pyproject.toml"
      - "/lg/"
    children:
      lg:
        mode: allow
        allow:
          - "/cli.py"
          - "/types.py"
          - "/engine.py"
          - "/section_processor.py"
          - "/config/"
          - "/adapters/"
          - "/template/"
        children:
          config:
            mode: allow
            allow:
              - "/load.py"
              - "/model.py"
          adapters:
            mode: allow
            allow:
              - "/__init__.py"
              - "/registry.py"
              - "/base.py"
              - "/processor.py"
              - "/markdown.py"
  targets:
    - match:
      - "/lg/template/*.py"
      python:
        budget:
          max_tokens_per_file: 1
    - match:
      - "/lg/template/lexer.py"
      python:
        budget:
          max_tokens_per_file: 10000

src-v2:
  extensions: [".py"]
  path_labels: relative
  filters:
    mode: allow
    allow:
      - "/lg/template_v2/"
  targets:
    - match:
      - "/lg/template_v2/*.py"
      python:
        budget:
          max_tokens_per_file: 10000

tests:
  extensions: [".py"]
  path_labels: relative
  filters:
    mode: allow
    allow:
      - "/tests/"
    children:
      tests:
        mode: allow
        allow:
          - "/conftest.py"
#          - "/md_placeholders/"
#          - "/adaptive/"
          - "/common_placeholders/"
#        children:
#          md_placeholders:
#            mode: allow
#            allow:
#              - "/conftest.py"
#              - "/test_basic_placeholders.py"
#          adaptive:
#            mode: allow
#            allow:
#              - "/conftest.py"
#              - "/test_basic_functionality.py"
#          common_placeholders:
#            mode: allow
#            allow:
#              - "/conftest.py"
#              - "/test_basic_section_placeholders.py"
  targets:
    - match:
      - "/tests/common_placeholders/*.py"
      python:
        budget:
          max_tokens_per_file: 1
    - match:
      - "/tests/common_placeholders/conftest.py"
      python:
        budget:
          max_tokens_per_file: 10000
